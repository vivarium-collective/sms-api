apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: sms-api-rke

images:
  # - name: ghcr.io/vivarium-collective/sms-api
  #   newTag: 0.2.21-dev
  - name: ghcr.io/vivarium-collective/sms-api
    newTag: 0.2.15-dev
  # - name: ghcr.io/biosimulations/sms-api
  #   newTag: 0.2.17-dev
    # STABLE: newTag: 0.2.10-dev
  - name: docker.io/library/mongo
    newTag: 8.0.4

replicas:
  - count: 1
    name: api
  - count: 0
    name: mongodb

resources:
  - ingress.yaml
  - api-cache-pvc.yaml
  - api-sqlite-pvc.yaml
  - nats-svc.yaml
  - haproxy-ssh-svc.yaml
  - vivarium-home-pv.yaml
  - vivarium-home-pvc.yaml
  - mongodb-pvc.yaml
  - secret-ghcr.yaml
  - secret-ssh.yaml
  - ../../config/sms-api-rke
  - ../../base
